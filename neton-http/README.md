# Neton HTTP æ¨¡å—

HTTP æ¨¡å—ä¸º Neton æ¡†æ¶æä¾›çœŸæ­£çš„ HTTP æœåŠ¡å™¨å®ç°ï¼ŒåŸºäº Ktor æœåŠ¡å™¨ã€‚

## ğŸ¯ è®¾è®¡åŸåˆ™

æŒ‰ç…§ä¾èµ–å€’ç½®åŸåˆ™è®¾è®¡ï¼š

- **Core æ¨¡å—**ï¼šå®šä¹‰ `HttpAdapter` æ¥å£æ ‡å‡†
- **HTTP æ¨¡å—**ï¼šä¾èµ– Core æ¨¡å—ï¼Œå®ç°å…·ä½“çš„ HTTP æœåŠ¡å™¨åŠŸèƒ½
- **Mock å®ç°**ï¼šå½“ HTTP æ¨¡å—ä¸å­˜åœ¨æ—¶ï¼ŒCore æ¨¡å—ä½¿ç”¨ Mock å®ç°

## ğŸ—ï¸ æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    ä¾èµ–    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   HTTP æ¨¡å—     â”‚ ---------> â”‚   Core æ¨¡å—     â”‚
â”‚ KtorHttpAdapter â”‚            â”‚ HttpAdapteræ¥å£ â”‚
â”‚                 â”‚            â”‚ MockHttpAdapter â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                             â”‚
        â”‚ init æ—¶ ctx.bind            â”‚ æä¾›æ¥å£
        â–¼                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            NetonContextï¼ˆå”¯ä¸€å®¹å™¨ï¼‰              â”‚
â”‚  ctx.get<HttpAdapter>() -> å®é™…å®ç° æˆ– Mock      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ ä¸»è¦ç»„ä»¶

### KtorHttpAdapter
- å®ç°çœŸæ­£çš„ Ktor HTTP æœåŠ¡å™¨
- æ”¯æŒæ‰€æœ‰ HTTP æ–¹æ³•ï¼ˆGET, POST, PUT, DELETE ç­‰ï¼‰
- è‡ªåŠ¨å°† Ktor è¯·æ±‚è½¬æ¢ä¸º Neton HttpContext
- æ”¯æŒä¼šè¯ç®¡ç†

### HttpComponent
- è´Ÿè´£æ¨¡å—åˆå§‹åŒ–å’Œæ³¨å†Œ
- é€šè¿‡ `ctx.bind(HttpAdapter::class, KtorHttpAdapter(...))` æ³¨å†Œåˆ° NetonContext
- é€šè¿‡ `http { }` install DSL æš´éœ²ï¼Œç»„ä»¶å¯¹ä¸šåŠ¡å±‚éšè—

## ğŸ“¦ ä½¿ç”¨æ–¹å¼

### 1. æ·»åŠ ä¾èµ–

```kotlin
// build.gradle.kts
dependencies {
    implementation(project(":neton-core"))
    implementation(project(":neton-http"))
}
```

### 2. ä½¿ç”¨ install DSLï¼ˆæ¨èï¼‰

```kotlin
// Main.kt
import neton.core.Neton
import neton.http.http
import neton.security.security
import neton.routing.routing

fun main(args: Array<String>) {
    Neton.run(args) {

        http {
            port = 8080
        }

        security {
            registerMockAuthenticator("test-user", listOf("user", "admin"))
        }

        routing {
            // KSP è‡ªåŠ¨ç”Ÿæˆè·¯ç”±
        }

        onStart {
            println("Server at http://localhost:${getPort()}")
        }
    }
}
```

## ğŸš€ ç‰¹æ€§

- âœ… **çœŸæ­£çš„ Ktor æœåŠ¡å™¨**ï¼šå®Œå…¨æ›¿ä»£ Mock å®ç°
- âœ… **æµè§ˆå™¨è®¿é—®æ”¯æŒ**ï¼šå¯é€šè¿‡æµè§ˆå™¨ç›´æ¥è®¿é—®
- âœ… **è‡ªåŠ¨é€‚é…**ï¼šæ— ç¼é›†æˆ Neton HttpContext
- âœ… **ä¼šè¯æ”¯æŒ**ï¼šå†…ç½® Session ç®¡ç†
- âœ… **é”™è¯¯å¤„ç†**ï¼šå®Œæ•´çš„å¼‚å¸¸å¤„ç†æœºåˆ¶
- âœ… **å¯æ‰©å±•æ€§**ï¼šæœªæ¥å¯æ”¯æŒå…¶ä»– HTTP åº“

## ğŸ”„ åˆ‡æ¢ HTTP åç«¯

ç”±äºé‡‡ç”¨äº†ä¾èµ–å€’ç½®è®¾è®¡ï¼Œæœªæ¥å¯ä»¥è½»æ¾åˆ‡æ¢åˆ°å…¶ä»– HTTP åº“ï¼š

1. åˆ›å»ºæ–°çš„ HTTP æ¨¡å—ï¼ˆå¦‚ `neton-http-netty`ï¼‰
2. å®ç° `HttpAdapter` æ¥å£
3. åœ¨åº”ç”¨ä¸­æ›¿æ¢æ¨¡å—ä¾èµ–

```kotlin
// ä» Ktor åˆ‡æ¢åˆ° Nettyï¼ˆç¤ºä¾‹ï¼‰
Neton.run(args) {
    http { port = 8080 }  // æˆ– netty { } è‹¥å®ç° NettyPlugin
    routing { }
}
```

## ğŸ§ª å¼€å‘çŠ¶æ€

- âœ… åŸºç¡€æ¶æ„å®Œæˆ
- â³ Ktor æœåŠ¡å™¨é›†æˆè¿›è¡Œä¸­
- â³ å®Œæ•´çš„è¯·æ±‚/å“åº”å¤„ç†
- â³ æ€§èƒ½ä¼˜åŒ–

## ğŸ“‹ TODO

- [ ] å®Œå–„ Ktor æœåŠ¡å™¨å¯åŠ¨é€»è¾‘
- [ ] å®ç°å®Œæ•´çš„ HTTP ä¸Šä¸‹æ–‡é€‚é…
- [ ] æ·»åŠ æ€§èƒ½ç›‘æ§
- [ ] æ”¯æŒ HTTPS
- [ ] æ·»åŠ æ›´å¤š HTTP åº“æ”¯æŒï¼ˆNettyã€Vertx ç­‰ï¼‰ 